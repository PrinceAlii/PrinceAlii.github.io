{{ define "main" }}
  {{ $profile := site.Data.profile }}
  {{ $projects := (where site.RegularPages "Section" "projects").ByDate.Reverse }}
  {{ $featured := first 1 $projects }}
  {{ $secondary := after 1 $projects }}
  <section class="hero section-top">
    <div class="container narrow">
      <div class="hero-main">
        <p class="eyebrow">{{ $profile.role }}</p>
        <h1>{{ $profile.name }}</h1>
        <p class="hero-meta">{{ $profile.location }}</p>
        <p class="lead">{{ $profile.summary }}</p>
        <ul class="focus-list">
          {{ range $profile.focus }}
            <li>{{ . }}</li>
          {{ end }}
        </ul>
        <div class="actions">
          <a class="button button-primary" href="{{ "/projects/" | relURL }}">View Projects</a>
          <a class="button button-secondary" href="{{ $profile.resume | relURL }}">Download Resume</a>
        </div>
        <nav class="hero-links" aria-label="External links">
          <a class="text-link" href="{{ $profile.linkedin }}">LinkedIn</a>
          <a class="text-link" href="{{ $profile.github }}">GitHub</a>
          <a class="text-link" href="mailto:{{ $profile.email }}">Email</a>
        </nav>
      </div>
    </div>
  </section>

  <section id="about" class="section">
    <div class="container narrow">
      <div class="about-body">
        <h2>About</h2>
        {{ range $profile.intro }}
          <p>{{ . }}</p>
        {{ end }}
        <p class="about-tagline">{{ $profile.about_statement }}</p>
      </div>
    </div>
  </section>

  <section id="experience" class="section section-alt">
    <div class="container">
      <h2>Experience</h2>
      <ol class="timeline">
        {{ range site.Data.experience }}
          <li class="timeline-item">
            <article class="timeline-card">
              <header class="timeline-head">
                <h3>{{ .role }}</h3>
                <p class="muted">{{ .company }}</p>
                <p class="meta">{{ .dates }}</p>
              </header>
              <ul>
                {{ range .points }}
                  <li>{{ . }}</li>
                {{ end }}
              </ul>
            </article>
          </li>
        {{ end }}
      </ol>
    </div>
  </section>

  <section id="education" class="section">
    <div class="container">
      <h2>Education</h2>
      <div class="education-grid">
        {{ range site.Data.education }}
          <article class="card education-card">
            <h3>{{ .qualification }}</h3>
            <p class="muted">{{ .institution }}</p>
            <p class="meta">{{ .graduation }}</p>
            {{ with .details }}
              <ul class="education-details">
                {{ range . }}
                  <li>{{ . }}</li>
                {{ end }}
              </ul>
            {{ end }}
          </article>
        {{ end }}
      </div>
    </div>
  </section>

  <section id="projects" class="section section-alt">
    <div class="container">
      <h2>Projects</h2>
      <div class="projects-layout">
        {{ range $featured }}
          <article class="project-feature">
            <p class="meta project-meta">Featured Case Study</p>
            <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
            <p>{{ .Summary }}</p>
            {{ with .Params.technologies }}
              <p class="meta">Stack: {{ delimit (first 4 .) ", " }}</p>
            {{ end }}
            <p><a class="text-link" href="{{ .RelPermalink }}">Read full case study</a></p>
          </article>
        {{ end }}
        <div class="projects-secondary">
          {{ range first 3 $secondary }}
            <article class="project-mini">
              <p class="meta project-meta">Project Snapshot</p>
              <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
              <p>{{ .Summary }}</p>
              <p><a class="text-link" href="{{ .RelPermalink }}">View project details</a></p>
            </article>
          {{ end }}
          <p><a class="button button-tertiary" href="{{ "/projects/" | relURL }}">Browse all projects</a></p>
        </div>
      </div>
    </div>
  </section>

  <section id="contact" class="section">
    <div class="container contact-layout">
      <div>
        <h2>Contact</h2>
        <p>If you are hiring for graduate engineering work, I am happy to connect.</p>
      </div>
      <div class="contact-list">
        <p>Email: <a class="text-link" href="mailto:{{ $profile.email }}">{{ $profile.email }}</a></p>
        <p>LinkedIn: <a class="text-link" href="{{ $profile.linkedin }}">{{ $profile.linkedin }}</a></p>
        <p>GitHub: <a class="text-link" href="{{ $profile.github }}">{{ $profile.github }}</a></p>
        <p>Location: {{ $profile.location }}</p>
      </div>
    </div>
  </section>
{{ end }}
